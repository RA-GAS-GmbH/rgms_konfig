<p><em><strong>ÄNDERUNGEN/SOFTWAREUPDATES</strong></em></p>
<p>Noch keine</p>
<p><em><strong><br />
</strong></em></p>
<p><em><strong>BUS-Protokoll für das RA-GAS-Modbus-System</strong></em></p>
<p>Verwendete Abkürzungen:</p>
<p>Rreg (read) Lese-Register (kann nicht beschrieben werden)</p>
<p>RWreg (read/write) Lese- und Schreibregister (kann auch beschrieben werden, teilweise mit Speicherung)</p>
<p>Fcode Funktionscode</p>
<p>Adr Adresse</p>
<p>Reg Register</p>
<h1 id="registerbelegung">Registerbelegung</h1>
<p>Tabelle der Lese(Read)-Register</p>
<table>
<thead>
<tr class="header">
<th><p>Rreg Nr.</p>
<p>(Fcode 0x04)</p></th>
<th>Wertebereich</th>
<th>Zugeordnete Größe und teilw. Einheit</th>
<th>Messwerteigenschaft</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>00</td>
<td>0 ... 65535</td>
<td></td>
<td>Gerätekennung Kunden</td>
</tr>
<tr class="even">
<td>01</td>
<td>0 ... 65535</td>
<td></td>
<td>Arbeitsweise (Sensor)</td>
</tr>
<tr class="odd">
<td>02</td>
<td>0 ..10000</td>
<td>0 .. 10000 ppm</td>
<td>Gaskonzentration im ppm</td>
</tr>
<tr class="even">
<td>03</td>
<td>0 ... 2500</td>
<td>0 .. 25.00 mA</td>
<td>Berechneter Ausgangsstrom in mA (mit zwei Kommastellen)</td>
</tr>
<tr class="odd">
<td>04</td>
<td>-200 ... 600</td>
<td>-20,0 .. 60,0 °C</td>
<td>Interne Leiterplattentemperatur in °C (mit Kommastelle)</td>
</tr>
<tr class="even">
<td>05</td>
<td>0 ... 0xffff</td>
<td></td>
<td>Fehlererkennung (Bit’s werden gesetzt)</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>40</td>
<td>0 ... 16384</td>
<td></td>
<td>AD-Wert der Temperaturmessung</td>
</tr>
<tr class="odd">
<td>41</td>
<td>0 ... 16384</td>
<td></td>
<td>AD-Wert des Potentiometers</td>
</tr>
<tr class="even">
<td>42</td>
<td>0 ... 16384</td>
<td></td>
<td>AD-Wert des Sensors</td>
</tr>
<tr class="odd">
<td>43</td>
<td>50 … 200</td>
<td>0,50 .. 2,00</td>
<td>Verstärkungsfaktor durch Poti (100 = 1,00)</td>
</tr>
<tr class="even">
<td>44</td>
<td>50 … 200</td>
<td>0,50 .. 2,00</td>
<td>Verstärkungsfaktor durch Temperaturkennlinie (100 = 1,00)</td>
</tr>
<tr class="odd">
<td>45</td>
<td>0 ... 16384</td>
<td></td>
<td>Korrigierter AD-Wert des Sensors</td>
</tr>
<tr class="even">
<td>46</td>
<td>0 .. 10000</td>
<td>0 .. 10000 ppm</td>
<td>berechnete Gaskonzentration im ppm</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>49</td>
<td>0 .. 31129</td>
<td></td>
<td>Softwaredatum bis 31.12.2029</td>
</tr>
</tbody>
</table>
<p><em>Hinweis:</em> der angegebene Wertebereich wiederspiegelt nicht gleichzeitig den Messbereich. Dieser ist abhängig vom Sensor und der Kalibrierung.</p>
<p>Zusätzliche Erläuterungen zu einigen Rreg-Registern:</p>
<p>Rreg_00: hier befindet sich der Kundencode welcher vom Kunden in Register RWreg_00 geschrieben und gespeichert wurde. (kann z.B. zur Raumnummerierung verwendet werden.</p>
<p>Rreg_01: Arbeitscode (Sensor)<br />
10 = CO-Sensor (1000)<br />
12 = CO-Sensor (300)</p>
<p>20 = NO-Sensor (250)</p>
<p>30 = NO2 (20)</p>
<p>40 = NH3 (1000)<br />
42 = NH3 (100)</p>
<p>50 = CL2 (10)</p>
<p>60 = H2S (100)</p>
<p>Rreg_02: Berechneter ppm-Wert aus Rreg_46 (mit Nullpunktberuhigung)</p>
<p>Rreg_03: der berechnete Strom für den analogen Stromausgang 4..20mA</p>
<p>Rreg_05: Fehlerregister:<br />
Bit_0 = 1: (Sensorspannung[Endwert –Nullwert])&lt; 2 digit/ppm<br />
Bit_1 = 1: (Sensorspannung Endwert od. Nullwert) &lt; 50 od. &gt; 16000 digit<br />
Bit_2 = 1: (ungünstiger Kalibrierwert) Berechnung läuft zu &lt; 50 und &gt; 16000 digit<br />
Bit_3 = 1: Sensor-AD-Wert &lt; 50 bzw. &gt; 16000 digit<br />
Bit_4 = 1: Ausgangsstrom &lt; 390 bzw. &gt; 2100<br />
Der Fehlercode wird auch durch die rote LED dargestellt. (Anzahl der Unterbrechungen entspricht dem gesetzten Bit)</p>
<p>Rreg_45: entspricht Rreg_42 * Rreg_43 * Rreg_44</p>
<p>Rreg_46: Berechneter ppm-Wert aus dem linearen Zusammenhang RWreg_10.._13</p>
<p>Tabelle der Lese/Schreib(Read/Write)-Register</p>
<table>
<thead>
<tr class="header">
<th><p>Rwreg Nr.</p>
<p>(Fcode: 0x03, 0x06)</p></th>
<th>Wertebereich</th>
<th><p>Zugeordnete Größe</p>
<p>und Einheit</p></th>
<th>Messwerteigenschaft</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>00</td>
<td>0 .. 65535 [0]</td>
<td></td>
<td>Kundencode: zur freien Belegung z.B. Raumcode *</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>02</td>
<td>0 … 10000 [11111]</td>
<td>0 … 10000 ppm</td>
<td>Messwertvorgabe für Testzwecke</td>
</tr>
<tr class="even">
<td>03</td>
<td>0 … 2500 [11111]</td>
<td>0 … 25,00 mA</td>
<td>Ausgangsstrom vorgeben für Testzwecke</td>
</tr>
<tr class="odd">
<td>04</td>
<td>-200 … 600 [11111]</td>
<td>-20,0 … 60,0 °C</td>
<td>Temperatur vorgeben für Testzwecke</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>10</strong></td>
<td><strong>0 … 16383</strong></td>
<td></td>
<td><strong>Sensorspannung im Nullpunkt</strong> *</td>
</tr>
<tr class="even">
<td><strong>11</strong></td>
<td><strong>0</strong></td>
<td><strong>0</strong></td>
<td><strong>Sensorwert Nullpunkt = 0</strong> *</td>
</tr>
<tr class="odd">
<td><strong>12</strong></td>
<td><strong>0 … 16383</strong></td>
<td></td>
<td><strong>Sensorspannung im Kalibrierpunkt ( bei Endwert)</strong> *</td>
</tr>
<tr class="even">
<td><strong>13</strong></td>
<td><strong>0 … 10000</strong></td>
<td><strong>0 … 10000 ppm</strong></td>
<td><strong>Sensorwert im Kalibrierpunkt (bei Endwert)</strong> *</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>15</strong></td>
<td><strong>0 … 10000 [0]</strong></td>
<td><strong>0 … 10000 ppm [0 ppm]</strong></td>
<td><strong>Messwert unten für Ausgangsstrom unten</strong> *</td>
</tr>
<tr class="odd">
<td><strong>16</strong></td>
<td><strong>0 … 2500 [400]</strong></td>
<td><strong>0 … 25,00 mA [4 mA]</strong></td>
<td><strong>Ausgangsstrom im unteren Punkt</strong> *</td>
</tr>
<tr class="even">
<td><strong>17</strong></td>
<td><strong>0 … 10000 [1000]</strong></td>
<td><strong>0 … 10000 ppm [1000ppm]</strong></td>
<td><strong>Messwert oben für Ausgangsstrom oben</strong> *</td>
</tr>
<tr class="odd">
<td><strong>16</strong></td>
<td><strong>0 … 2500 [2000]</strong></td>
<td><strong>0 … 25,00 mA [20 mA]</strong></td>
<td><strong>Ausgangsstrom im oberen Punkt</strong> *</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>20</td>
<td>0 / 1</td>
<td></td>
<td>Status (Auswerte IC) (keine Eingabemöglichkeit)</td>
</tr>
<tr class="even">
<td><strong>21</strong></td>
<td><strong>0 / 1</strong></td>
<td></td>
<td><strong>Lock (Auswerte IC)</strong> *</td>
</tr>
<tr class="odd">
<td><strong>22</strong></td>
<td><strong>0 … 7</strong></td>
<td></td>
<td><strong>TIA_GAIN (Auswerte IC)</strong> *</td>
</tr>
<tr class="even">
<td><strong>23</strong></td>
<td><strong>0 … 3</strong></td>
<td></td>
<td><strong>RLOAD (Auswerte IC)</strong> *</td>
</tr>
<tr class="odd">
<td><strong>24</strong></td>
<td><strong>0 / 1</strong></td>
<td></td>
<td><strong>REF_Source (Auswerte IC)</strong> *</td>
</tr>
<tr class="even">
<td><strong>25</strong></td>
<td><strong>0 … 3</strong></td>
<td></td>
<td><strong>INT_Z (Auswerte IC)</strong> *</td>
</tr>
<tr class="odd">
<td><strong>26</strong></td>
<td><strong>0 / 1</strong></td>
<td></td>
<td><strong>BIAS_Sign (Auswerte IC)</strong> *</td>
</tr>
<tr class="even">
<td><strong>27</strong></td>
<td><strong>0 … 13</strong></td>
<td></td>
<td><strong>BIAS (Auswerte IC)</strong> *</td>
</tr>
<tr class="odd">
<td><strong>28</strong></td>
<td><strong>0 / 1</strong></td>
<td></td>
<td><strong>FET_Short (Auswerte IC)</strong> *</td>
</tr>
<tr class="even">
<td><strong>29</strong></td>
<td><strong>0 … 7</strong></td>
<td></td>
<td><strong>OP_Mode (Auswerte IC)</strong> *</td>
</tr>
<tr class="odd">
<td><strong>30</strong></td>
<td><strong>50 ... 200</strong></td>
<td><strong>0,50 … 2,00</strong></td>
<td><strong>Kennlinie vom Sensorhersteller bei -20°C</strong> *</td>
</tr>
<tr class="even">
<td><strong>31</strong></td>
<td><strong>50 ... 200</strong></td>
<td><strong>0,50 … 2,00</strong></td>
<td><strong>Kennlinie vom Sensorhersteller bei 0°C</strong> *</td>
</tr>
<tr class="odd">
<td><strong>32</strong></td>
<td><strong>50 ... 200</strong></td>
<td><strong>0,50 … 2,00</strong></td>
<td><strong>Kennlinie vom Sensorhersteller bei 10°C</strong> *</td>
</tr>
<tr class="even">
<td><strong>33</strong></td>
<td><strong>50 ... 200</strong></td>
<td><strong>0,50 … 2,00</strong></td>
<td><strong>Kennlinie vom Sensorhersteller bei 20°C</strong> *</td>
</tr>
<tr class="odd">
<td><strong>34</strong></td>
<td><strong>50 ... 200</strong></td>
<td><strong>0,50 … 2,00</strong></td>
<td><strong>Kennlinie vom Sensorhersteller bei 30°C</strong> *</td>
</tr>
<tr class="even">
<td><strong>35</strong></td>
<td><strong>50 ... 200</strong></td>
<td><strong>0,50 … 2,00</strong></td>
<td><strong>Kennlinie vom Sensorhersteller bei 40°C</strong> *</td>
</tr>
<tr class="odd">
<td><strong>36</strong></td>
<td><strong>50 ... 200</strong></td>
<td><strong>0,50 … 2,00</strong></td>
<td><strong>Kennlinie vom Sensorhersteller bei 60°C</strong> *</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>42</td>
<td>0 … 16000 [11111]</td>
<td></td>
<td>Sensor AD-Wert vorgeben für Testzwecke</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>49</td>
<td>0 … 65535</td>
<td></td>
<td>Neustart / Grunddaten / entsichern</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>50</strong></td>
<td><strong>1 … 247 [1]</strong></td>
<td></td>
<td><strong>Modbus-Geräteadresse</strong> *</td>
</tr>
<tr class="even">
<td><strong>51</strong></td>
<td><strong>0 … 3 [1]</strong></td>
<td></td>
<td><strong>Modbus Baudrate</strong> *</td>
</tr>
<tr class="odd">
<td><strong>52</strong></td>
<td><strong>0 … 4 [0]</strong></td>
<td></td>
<td><strong>Modbus Mode</strong> *</td>
</tr>
<tr class="even">
<td><strong>53</strong></td>
<td><strong>10 .. 1000 [180]</strong></td>
<td></td>
<td><strong>Kalibrierwert Ausgangsstrom 4mA</strong> *</td>
</tr>
<tr class="odd">
<td><strong>54</strong></td>
<td><strong>10 … 1000 [900]</strong></td>
<td></td>
<td><strong>Kalibrierwert Ausgangsstrom 20mA</strong> *</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>95</strong></td>
<td><strong>0, 129 … 256 [90]</strong></td>
<td></td>
<td><strong>Sensornummer für MCS4000 - Mode</strong></td>
</tr>
<tr class="even">
<td><strong>96</strong></td>
<td><strong>0 … 65535</strong></td>
<td></td>
<td><strong>Einschaltzähler</strong> *</td>
</tr>
<tr class="odd">
<td><strong>97</strong></td>
<td><strong>0 … 65535</strong></td>
<td></td>
<td><strong>Betriebsstunden</strong> *</td>
</tr>
<tr class="even">
<td><strong>98</strong></td>
<td><strong>0 … 65535</strong></td>
<td></td>
<td><strong>Gerätekennung vom Werk</strong> *</td>
</tr>
<tr class="odd">
<td><strong>99</strong></td>
<td><strong>0 … 65535</strong></td>
<td></td>
<td><strong>Arbeitsweise vom Werk</strong> *</td>
</tr>
</tbody>
</table>
<p><em>Hinweise:</em></p>
<ul>
<li><p>* (<strong>fett</strong>) eingetragene Werte werden auch gespeichert<br />
<em>(Achtung: nicht kontinuierlich beschreiben!)</em></p></li>
<li><p>[x] Wert nach dem Einschalten bzw. bei Voreinstellung (Werkseinstellung)</p></li>
<li><p>Grau hinterlegte Werte nur nach Entsicherung veränderbar</p></li>
</ul>
<p>Zusätzliche Erläuterungen zu einigen RWreg-Registern:</p>
<p>RWreg_00: hier kann ein Kundencode für eine Gerätezuordnung eingetragen werden z.B. zur Raumnummerierung</p>
<p>RWreg_02, 03, 04, 46:<br />
für Testzwecke Vorgabe verschiedener Werte. Mit 11111 ist dies inaktiv.</p>
<p>RWreg_10, 11, 12, 13:</p>
<p>Kennlinienpaar für die Umwandlung des Sensor AD_Wertes in die Gaskonzentration (lineare Interpolation mit diesen Werten)</p>
<p>RWreg_15, 16, 17, 18:</p>
<p>Kennlinienpaar für die Umwandlung der Gaskonzentration in den Ausgangsstrom (lineare Interpolation mit diesen Werten)</p>
<p>RWreg_20 bis _29:</p>
<p>Spezifische Einstellungen für den Auswerte IC</p>
<p>RWreg_30 bis _36:</p>
<p>Korrekturwerte entsprechend Vorgabe des Sensorherstellers bzgl. der Temperatur<br />
zwischen den Temperaturwerten wird linear interpoliert</p>
<p>RWreg_49: bei 10 = Reset<br />
bei 20 = Systemneueinstellung und Reset<br />
bei 9876 = entsichert</p>
<p>RWreg_51: bei 0 = 2400 baud<br />
bei 1 = 9600 baud<br />
bei 2 = 19200 baud<br />
bei 3 = 38400 baud</p>
<p>RWreg_52: bei 0 = 8 Datenbits, 1 Stoppbit; keine parität<br />
bei 1 = 8 Datenbits, 1 Stoppbit; ungerade Parität<br />
bei 2 = 8 Datenbits, 2 Stoppbit; ungerade Parität<br />
bei 3 = 8 Datenbits, 1 Stoppbit; gerade Parität<br />
bei 4 = 8 Datenbits, 2 Stoppbit; gerade Parität</p>
<p>RWreg_53: zur Kalibrierung des Ausgangsstroms<br />
Beispiel: in RWreg_3 = 400 eintragen; Veränderung des analogen Ausgangstrom (gemessen mit Multimeter) über Werteänderung von RWreg_53 bis 4 mA anliegen</p>
<p>RWreg_54: zur Kalibrierung des Ausgangsstroms<br />
Beispiel: in RWreg_3 = 2000 eintragen; Veränderung des analogen Ausgangstrom (gemessen mit Multimeter) über Werteänderung von RWreg_54 bis 20 mA anliegen.</p>
<p>RWreg_94: Eingabe einer Zahl 129 … 256 erzeugt ein Umschalten der RS485 Schnittstelle vom MODBUS-Mode in den MCS4000-Mode mit der entsprechenden Sensornummer<br />
Achtung: nur über den Systemstecker ist eine Reaktivierung möglich (automatisch MODBUS auf Systemstecker und Zugriff auf die Register)</p>
<h1 id="modbus-übertragungsaufbau">Modbus-Übertragungsaufbau</h1>
<table>
<thead>
<tr class="header">
<th>Start</th>
<th>Slave Adresse</th>
<th>Funktion</th>
<th>Daten</th>
<th>Checksumme</th>
<th>Ende</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>3.5* Zeichenzeit</td>
<td>8 Bit</td>
<td>8 Bit</td>
<td>N* 8 Bit</td>
<td>16 Bit</td>
<td>3.5* Zeichenzeit</td>
</tr>
</tbody>
</table>
<p>Start/Ende:</p>
<p>Befinden sich auf dem Modbus keine Daten bzw. gibt es eine Datenpause von 3,5 * der Zeichenzeit, so wird die Datenerfassung zurückgesetzt.</p>
<p>Ein jetzt neues Zeichen auf dem Bus wird damit als erstes Zeichen (Adresse) erkannt und ausgewertet.</p>
<p><em>Beispiel:</em> 9600 baud, keine Parität, ein Stoppbit</p>
<p>0,93 ms/Zeichen =&gt; ca. 3,3 ms für die Starterkennung</p>
<p>Slave Adresse (8 Bit = 1 Byte):</p>
<p>Die Slave-Adresse (spezifische Geräteadresse) ist im RWreg_50 abgelegt</p>
<p>Diese darf nur einmal im Modbusstrang verwendet werden.</p>
<p>Wird die Slave Adresse ‚0‘ gesendet nehmen alle Geräte welche auf 1 bis 247 geschalten sind den Befehl an (Boardcast; es gibt jedoch keine Rückantwort!)</p>
<p>Funktionscode (8 Bit = 1 Byte):</p>
<p>Folgende Funktionscodes aus dem allgemeinen Modbus-Protokoll sind implementiert.</p>
<p>Code 03: Registerinhalt (16 Bit) lesen (eines Lese- und Schreib-Registers)</p>
<p>Code 04: Registerinhalt (16 Bit) lesen (eines nur Lese-Registers)</p>
<p>Code 06: Register beschreiben (16 Bit) – ein Register</p>
<p>Code 16: Register beschreiben (16 Bit) – mehrere nacheinander folgende Register (max. 10)</p>
<p>Register (16 Bit = 2 Byte):</p>
<p>Beschreibung siehe Kapitel Registeraufbau</p>
<p>Registeranzahl (16 Bit = 2 Byte):</p>
<p>Für eine Begrenzung der Übertragungszeit/Zeichenketten ist die Registeranzahl auf maximal 10 begrenzt [0x0001 bis 0x000a]</p>
<p>Checksumme (16 Bit = 2 Byte):</p>
<p>Die Ermittlung der Checksumme erfolgt nach den Richtlinien eines Modbus-Protokolls.</p>
<p>Dabei entsteht ein 16 Bit Wert, der mit dem LO- und HI-Byte der Zeichenkette angehangen wird.</p>
<h2 id="funktionscode-03-lesen-von-leseschreibreadwrite-registern-16-bit">Funktionscode 03 lesen von Lese/Schreib(Read/Write)-Registern (16 Bit)</h2>
<p>Anfrage:</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x03</strong></td>
</tr>
<tr class="even">
<td>Start Register</td>
<td>Register HI</td>
</tr>
<tr class="odd">
<td>Start Register</td>
<td>Register LO</td>
</tr>
<tr class="even">
<td>Registeranzahl</td>
<td>Registeranzahl HI</td>
</tr>
<tr class="odd">
<td>Registeranzahl</td>
<td>Registeranzahl LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Rückantwort:</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x03</strong></td>
</tr>
<tr class="even">
<td>Anzahl der Bytes</td>
<td>Anzahl [n] der Registerwerte (Bytes = n * 2)</td>
</tr>
<tr class="odd">
<td>1. Registerwert</td>
<td>Wert HI</td>
</tr>
<tr class="even">
<td>1. Registerwert</td>
<td>Wert HO</td>
</tr>
<tr class="odd">
<td>n. Registerwert</td>
<td>Wert HI</td>
</tr>
<tr class="even">
<td>n. Registerwert</td>
<td>Wert LO</td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Bei fehlerhaftem Register (siehe Registerbelegung)</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x83</strong></td>
</tr>
<tr class="even">
<td><strong>Fehlercode</strong></td>
<td><strong>0x02</strong></td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Bei fehlerhafter Registeranzahl (&gt;= 0x000a) [max. 10*]</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x83</strong></td>
</tr>
<tr class="even">
<td><strong>Fehlercode</strong></td>
<td><strong>0x03</strong></td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<h2 id="funktionscode-04-lesen-von-nur-leseread-registern-16-bit">Funktionscode 04 lesen von nur Lese(Read)-Registern (16 Bit)</h2>
<p>Anfrage:</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x04</strong></td>
</tr>
<tr class="even">
<td>Start Register</td>
<td>Register HI</td>
</tr>
<tr class="odd">
<td>Start Register</td>
<td>Register LO</td>
</tr>
<tr class="even">
<td>Registeranzahl</td>
<td>Registeranzahl HI</td>
</tr>
<tr class="odd">
<td>Registeranzahl</td>
<td>Registeranzahl LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Rückantwort:</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x04</strong></td>
</tr>
<tr class="even">
<td>Anzahl der Bytes</td>
<td>Anzahl [n] der Registerwerte (Bytes = n * 2)</td>
</tr>
<tr class="odd">
<td>1. Registerwert</td>
<td>Wert HI</td>
</tr>
<tr class="even">
<td>1. Registerwert</td>
<td>Wert HO</td>
</tr>
<tr class="odd">
<td>n. Registerwert</td>
<td>Wert HI</td>
</tr>
<tr class="even">
<td>n. Registerwert</td>
<td>Wert LO</td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Bei fehlerhaftem Register (siehe Registerbelegung)</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x84</strong></td>
</tr>
<tr class="even">
<td><strong>Fehlercode</strong></td>
<td><strong>0x02</strong></td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Bei fehlerhafter Registeranzahl (&gt;= 0x000a) [max. 10*]</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x84</strong></td>
</tr>
<tr class="even">
<td><strong>Fehlercode</strong></td>
<td><strong>0x03</strong></td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<h2 id="funktionscode-06-schreiben-einfach-register-16-bit">Funktionscode 06 schreiben einfach Register (16 Bit)</h2>
<p>Anfrage:</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x06</strong></td>
</tr>
<tr class="even">
<td>Register</td>
<td>Register HI</td>
</tr>
<tr class="odd">
<td>Register</td>
<td>Register LO</td>
</tr>
<tr class="even">
<td>Register Wert</td>
<td>Wert HI</td>
</tr>
<tr class="odd">
<td>Register Wert</td>
<td>Wert LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Rückantwort:</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x06</strong></td>
</tr>
<tr class="even">
<td>Register</td>
<td>Register HI</td>
</tr>
<tr class="odd">
<td>Register</td>
<td>Register LO</td>
</tr>
<tr class="even">
<td>Register Wert</td>
<td>Wert HI</td>
</tr>
<tr class="odd">
<td>Register Wert</td>
<td>Wert LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Bei fehlerhaftem Register (siehe Registerbelegung)</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x86</strong></td>
</tr>
<tr class="even">
<td><strong>Fehlercode</strong></td>
<td><strong>0x02</strong></td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Bei fehlerhaftem Wertebereich</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x84</strong></td>
</tr>
<tr class="even">
<td><strong>Fehlercode</strong></td>
<td><strong>0x03</strong></td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Werden Werte übertragen, die außerhalb des Messbereiches liegen, werden diese auf den Messbereich begrenzt und verwendet. Es wird dennoch die Fehlermeldung (Fehlercode 0x03) gesendet.</p>
<h2 id="funktionscode-16-schreiben-mehrfach-register-16-bit">Funktionscode 16 schreiben mehrfach Register (16 Bit)</h2>
<p>Anfrage:</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x10</strong></td>
</tr>
<tr class="even">
<td>Start Register</td>
<td>Register HI</td>
</tr>
<tr class="odd">
<td>Start Register</td>
<td>Register LO</td>
</tr>
<tr class="even">
<td>Registeranzahl</td>
<td>Registeranzahl HI</td>
</tr>
<tr class="odd">
<td>Registeranzahl</td>
<td>Registeranzahl LO</td>
</tr>
<tr class="even">
<td>Anzahl der Bytes</td>
<td>Anzahl der Register (n) mal 2</td>
</tr>
<tr class="odd">
<td>1. Registerwert</td>
<td>Wert HI</td>
</tr>
<tr class="even">
<td>1. Registerwert</td>
<td>Wert LO</td>
</tr>
<tr class="odd">
<td>n. Registerwert</td>
<td>Wert HI</td>
</tr>
<tr class="even">
<td>n. Registerwert</td>
<td>Wert LO</td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Rückantwort:</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x10</strong></td>
</tr>
<tr class="even">
<td>Start Register</td>
<td>Register HI</td>
</tr>
<tr class="odd">
<td>Start Register</td>
<td>Register LO</td>
</tr>
<tr class="even">
<td>Registeranzahl</td>
<td>Registeranzahl HI</td>
</tr>
<tr class="odd">
<td>Registeranzahl</td>
<td>Registeranzahl LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Bei fehlerhaftem Register (siehe Registerbelegung)</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x90</strong></td>
</tr>
<tr class="even">
<td><strong>Fehlercode</strong></td>
<td><strong>0x02</strong></td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Bei fehlerhafter Registeranzahl (&gt;= 0x000a) [max. 10*] oder fehlerhaften Wertebereich</p>
<table>
<thead>
<tr class="header">
<th>Slave Adresse</th>
<th>0x00 … 0xff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Funktionscode</strong></td>
<td><strong>0x90</strong></td>
</tr>
<tr class="even">
<td><strong>Fehlercode</strong></td>
<td><strong>0x03</strong></td>
</tr>
<tr class="odd">
<td>Checksumme</td>
<td>Check LO</td>
</tr>
<tr class="even">
<td>Checksumme</td>
<td>Check HI</td>
</tr>
</tbody>
</table>
<p>Werden Werte übertragen, die außerhalb des Messbereiches liegen, werden diese auf den Messbereich begrenzt und verwendet. Es wird dennoch die Fehlermeldung (Fehlercode 0x03) gesendet.</p>
<p><em>Hinweis:</em> Die Rückantwortzeit nach erfolgter richtiger Anfrage liegt unter 250 ms (meist kleiner 50 ms).</p>
<h1 id="anschlussinformation-bedienelemente">Anschlussinformation / Bedienelemente</h1>
<p>Das Bild zeigt die wichtigsten Elemente zum Anschluss der Platine.</p>
<p><img src="media/image1.jpeg" style="width:3.40556in;height:2.15778in" /></p>
<p>Versorgungsspannung: +UB = 10 – 36V DC</p>
<p>A &amp; B: sind Leitungen einer RS485</p>
<p>OUT: Stromausgang 4 – 20mA<br />
Achtung: max. Lastwiderstand abhängig von +UB<br />
R<sub>last-max</sub> = (+UB – 10V) / 0,02A</p>
<p>Wird beim Systemstecker PIN_1 (GND) mit Pin_10 verbunden so schaltet das System in einen vorgegebenen Modus.</p>
<ul>
<li><p>Feste Adresse = 247</p></li>
<li><p>Baudrate = 9600</p></li>
<li><p>MODBUS</p></li>
<li><p>Abschalten des A/B Stranges vom System</p></li>
</ul>
<p>Taster:</p>
<ul>
<li><p>zur Nullpunktkalibrierung: drücken =&gt; rote LED blinkt, nach ca. 3sec loslassen</p></li>
<li><p>zur Endpunktkalibrierung: drücken =&gt; rote LED blinkt, nach ca. 6sec (beim zweiten Dauerlicht) loslassen</p></li>
</ul>
<p>LED grün: blinkt (blitzt) wenn Datenaustausch ok ist</p>
<p>LED rot: blitzt bei Fehler im Datenaustausch z.B. Register falsch beschrieben</p>
